{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst APIKEY = \"48409892-84416e27ee3da12ba614fc4d7\";\nconst fetchBtn = document.getElementById(\"fetch-btn\")\n\nexport async function fetchImages(query, page) { \n    const options = {\n        key: APIKEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page: page\n    };\n    try {\n     const res =  await axios.get(\"https://pixabay.com/api/\", {\n        params: options\n     },\n        )\n        fetchBtn.style.display = \"block\"        \n       return res.data \n    }\n    catch (err) {\n        console.log(err);\n    }\n   \n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\nconst fetchBtn = document.getElementById(\"fetch-btn\");\nexport let totalHits = 0;\n\nconst renderImages = (data) => {\n    const { hits } = data;\n    totalHits = data.totalHits;\n    if (hits.length === 0) {\n            fetchBtn.style.display = \"none\"\n\n        iziToast.show({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            messageColor: 'white',\n            position: 'topRight',\n            backgroundColor: 'red',\n            close: false,\n            progressBar: false,\n                })\n    }\n   \n    return hits\n        .map(\n            ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n            <div class=\"image-card\">\n                <a href=\"${largeImageURL}\" target=\"_blank\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                </a>\n                <div class=\"image-info\">\n                    <p><strong>Likes</strong> ${likes}</p>\n                    <p><strong>Views</strong> ${views}</p>\n                    <p><strong>Comments</strong> ${comments}</p>\n                    <p><strong>Downloads</strong> ${downloads}</p>\n                </div>\n            </div>`\n        )\n        .join(\"\");\n};\n\nexport const renderGallery = (data) => {\n    const markup = renderImages(data);\n    gallery.insertAdjacentHTML(\"beforeend\", markup)\n};\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchImages } from \"./js/pixabay-api.js\";\nimport { renderGallery, totalHits } from \"./js/render-functions.js\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\n\nconst form = document.querySelector(\"form\");\nconst gallery = document.querySelector(\".gallery\");\nconst fetchBtn = document.getElementById(\"fetch-btn\");\n\nlet currentQuery = \"\";\nlet page = 1;\nlet lightbox;\n\n\n function main() {\n    form.addEventListener(\"submit\", async (e) => {\n        e.preventDefault();\n        //! loading span\n        fetchBtn.insertAdjacentHTML(\"beforebegin\", \"<span class='loader'></span>\") \n       \n\n        const formData = new FormData(e.target);\n        currentQuery = formData.get(\"search-input\");\n\n        if (!currentQuery) {\n            iziToast.show({\n                message: \"Input is empty!\",\n                messageColor: \"white\",\n                position: \"topRight\",\n                backgroundColor: \"red\",\n                close: false,\n                progressBar: false,\n            });\n            return;\n        }\n\n        form.reset();\n        page = 1; \n        try {\n            const images = await fetchImages(currentQuery, page)\n             gallery.innerHTML = \"\";\n            renderGallery(images);\n            initializeLightbox();\n            checkFetchButton();\n        }\n        catch (err){\n            console.error(\"Error:\", err);\n                gallery.innerHTML = \"\";\n        }\n    });\n\n    fetchBtn.addEventListener(\"click\",async () => {\n        page += 1;\n        try {\n            const newImages = await fetchImages(currentQuery, page)\n            renderGallery(newImages);\n            initializeLightbox();\n            checkFetchButton();\n            scrollPage()\n        }\n        catch (err) {\n             console.error(\"Error:\", e);\n        }\n    });\n}\n\n//! Scrolling\nfunction scrollPage() {\n    const imageCard = document.querySelector(\".image-card\");\n\n    if (imageCard) {\n        const cardHeight = imageCard.getBoundingClientRect().height;\n        \n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\"\n        });\n    }\n}\n//! End of scrolling\n\nfunction checkFetchButton() {\n    const totalDisplayedItems = document.querySelectorAll(\".image-card\").length;\n    if (totalDisplayedItems >= totalHits) {\n        iziToast.show({\n             message: \"We're sorry, but you've reached the end of search results.\",\n            messageColor: 'white',\n            position: 'topRight',\n            backgroundColor: 'blue',\n            close: false,\n            progressBar: false,\n        })\n        fetchBtn.style.display = \"none\";\n    } else {\n        fetchBtn.style.display = \"block\";\n    }\n}\n\nfunction initializeLightbox() {\n    if (lightbox) {\n        lightbox.destroy()\n    }\n     lightbox = new SimpleLightbox(\".gallery a\", {\n        captionDelay: 250,\n    });\n    lightbox.refresh();\n}\n\nmain();\n"],"names":["APIKEY","fetchBtn","fetchImages","query","page","options","res","axios","err","gallery","totalHits","renderImages","data","hits","iziToast","webformatURL","largeImageURL","tags","likes","views","comments","downloads","renderGallery","markup","form","currentQuery","lightbox","main","e","images","initializeLightbox","checkFetchButton","newImages","scrollPage","imageCard","cardHeight","SimpleLightbox"],"mappings":"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"}